(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{1086:function(t,n,e){"use strict";e(913)},1087:function(t,n,e){var o=e(21)((function(i){return i[1]}));o.push([t.i,".btn-excel[data-v-e9ed2598]{background:#00c092}.btn-excel[data-v-e9ed2598],.btn-pdf[data-v-e9ed2598]{align-items:center;border-radius:46px;color:#fff;display:flex;flex-shrink:0;font-family:SVN-Gilroy;font-size:14px;font-style:normal;font-weight:500;gap:10px;justify-content:center;line-height:normal;padding:12px 32px}.btn-pdf[data-v-e9ed2598]{background:#0056b1}.blade-id[data-v-e9ed2598]{display:inline;display:initial}.box-img[data-v-e9ed2598]{border-radius:50%;height:55px;overflow:hidden;width:55px}.box-img img[data-v-e9ed2598]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}",""]),o.locals={},t.exports=o},1222:function(t,n,e){"use strict";e.r(n);var o=e(849),r=e(1147),d=(e(20),e(13)),l=(e(42),e(14),e(5),e(15),e(65)),c=e(506),v=e.n(c),_=e(30),h=e.n(_),m={layout:"admin",data:function(){return{title:{name:"Tạo phiếu lương",previous:"/admin/dashboard/salary"},data:null,date:(new Date).toISOString().substr(0,7),month:1,menu:!1,modal:!1,tong_tien:0,tong_tien_2:0,ghi_chu:null}},validate:function(t){var n=t.params;return/^\d+$/.test(n.id)},computed:{id:function(){return this.$route.params.id},date_l:function(){return this.$route.params.date_l},token:function(){return JSON.parse(localStorage.getItem("user")).auth_key}},methods:{load_data:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.date_l,o=e.split("-"),n.next=4,l.default.get("chi-luong/tao-phieu-luong?thang=".concat(o[1]+"/"+o[0],"&id=")+t.id,{"Content-Type":"multipart/form-data",Authorization:"Bearer "+t.token}).then((function(n){var e,o,r=null==n||null===(e=n.data)||void 0===e?void 0:e.data;t.data=r,t.tong_tien=null===(o=t.data)||void 0===o?void 0:o.thanhTien}));case 4:case"end":return n.stop()}}),n)})))()},send_data:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).append("tong_tien",t.tong_tien),o.append("phieu_luong_id",null===(e=t.data)||void 0===e?void 0:e.phieu_luong_id),o.append("ghi_chu",t.ghi_chu),n.next=6,l.default.post("chi-luong/thanh-toan",o,{"Content-Type":"multipart/form-data",Authorization:"Bearer "+t.token}).then((function(n){var e;200==(null==n?void 0:n.status)&&(h.a.success(null==n||null===(e=n.data)||void 0===e?void 0:e.message),t.$refs["my-modal"].hide(),t.load_data())}));case 6:case"end":return n.stop()}}),n)})))()},send_data_2:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).append("tong_tien",t.tong_tien),o.append("phieu_luong_id",null===(e=t.data)||void 0===e?void 0:e.phieu_luong_id),o.append("ghi_chu",t.ghi_chu),n.next=6,l.default.post("chi-luong/thanh-toan",o,{"Content-Type":"multipart/form-data",Authorization:"Bearer "+t.token}).then((function(n){var e;200==(null==n?void 0:n.status)&&(h.a.success(null==n||null===(e=n.data)||void 0===e?void 0:e.message),t.$refs["my-modal-2"].hide(),t.load_data())}));case 6:case"end":return n.stop()}}),n)})))()},export_excel:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var e,o,r,d,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.a.fire({title:"Đang xử lý yêu cầu!",html:"Vui lòng chờ...",timerProgressBar:!0}).then((function(t){t.dismiss===v.a.DismissReason.timer&&console.log("I was closed by the timer")})),e=new Date,e.getDate(),o=e.getMonth()+1,r=e.getFullYear(),d=t.date_l,c=d.split("-"),console.log("".concat(o,"/").concat(r)),n.next=10,l.default.get("chi-luong/export-phieu-luong?id=".concat(t.id,"&thang=").concat(c[1],"/").concat(c[0]),{"Content-Type":"multipart/form-data",Authorization:"Bearer "+t.token}).then((function(t){var n;v.a.close(),h.a.success("Tải xuống thành công"),window.open(null==t||null===(n=t.data)||void 0===n?void 0:n.data)}));case 10:case"end":return n.stop()}}),n)})))()},export_pdf:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var e,o,r,d,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.a.fire({title:"Đang xử lý yêu cầu!",html:"Vui lòng chờ...",timerProgressBar:!0}).then((function(t){t.dismiss===v.a.DismissReason.timer&&console.log("I was closed by the timer")})),e=new Date,e.getDate(),o=e.getMonth()+1,r=e.getFullYear(),d=t.date_l,c=d.split("-"),console.log("".concat(o,"/").concat(r)),n.next=10,l.default.get("/chi-luong/pdf-phieu-luong?id=".concat(t.id,"&thang=").concat(c[1],"/").concat(c[0]),{"Content-Type":"multipart/form-data",Authorization:"Bearer "+t.token}).then((function(t){var n;v.a.close(),h.a.success("Tải xuống thành công"),window.open(null==t||null===(n=t.data)||void 0===n?void 0:n.data)}));case 10:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.title.previous="/admin/dashboard/salary/"+this.id,this.$store.dispatch("title/set_title",this.title),this.load_data()}},f=(e(1086),e(36)),component=Object(f.a)(m,(function(){var t,n,e,d,l,c,v,_,h,m,f,y=this,x=y._self._c;return x("div",{staticClass:"content-mp"},[x(r.a,[x(o.a,{staticClass:"mt-0 pt-0",attrs:{xs:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[x("div",[x("div",{staticClass:"my-4 d-flex flex-wrap"},[x("button",{staticClass:"btn-excel",on:{click:function(t){return y.export_excel()}}},[y._v("\n                        Xuất Excel\n                    ")]),y._v(" "),x("button",{staticClass:"btn-pdf ms-3",on:{click:function(t){return y.export_pdf()}}},[y._v("\n                        In phiếu\n                    ")])]),y._v(" "),x("div",{staticClass:"card"},[x("div",{staticClass:"card-header bg-primary text-light text-center"},[x("b",[y._v("PHIẾU LƯƠNG")])]),y._v(" "),x("div",{staticClass:"card-body"},[x("table",{staticClass:"table"},[x("tr",[x("td",{attrs:{colspan:"2"}},[x("div",{staticClass:"text-center"},[x("b",[y._v(y._s(null===(t=y.data)||void 0===t?void 0:t.thoi_gian))])])])]),y._v(" "),x("tr",[x("td",[x("b",[y._v("Họ và tên")])]),y._v(" "),x("td",[x("b",[y._v(y._s(null===(n=y.data)||void 0===n||null===(n=n.giaoVien)||void 0===n?void 0:n.hoten))])])]),y._v(" "),x("tr",[x("td",[x("b",[y._v("Mã đối tác")])]),y._v(" "),x("td",[x("b",[y._v(y._s(null===(e=y.data)||void 0===e||null===(e=e.giaoVien)||void 0===e?void 0:e.id))])])])]),y._v(" "),x("table",{staticClass:"table table-bordered"},[x("thead",[x("tr",[x("td",[x("b",[y._v("Chi tiết khoản mục")])]),y._v(" "),x("td",[x("b",[y._v("Ngày công thực tế")])]),y._v(" "),x("td",[x("b",[y._v("Đơn giá")])])])]),y._v(" "),x("tr",[x("td",{attrs:{colspan:"3"}},[x("b",[y._v("1. Thông tin tính lương")])])]),y._v(" "),y._l(null===(d=y.data)||void 0===d?void 0:d.donDichVu,(function(t,n){var e;return x("tr",{key:n},[x("td",[x("div",[y._v("Mã đơn dịch vụ")]),y._v(" "),x("div",{staticClass:"text-primary"},[x("nuxt-link",{attrs:{to:"/admin/orders/"+(null==t?void 0:t.id)}},[x("span",[y._v(y._s(null!==(e=null==t?void 0:t.ma_don_hang)&&void 0!==e?e:"Chưa cập nhật"))])])],1)]),y._v(" "),x("td",[x("span",[y._v(y._s(null==t?void 0:t.so_buoi))])]),y._v(" "),x("td",[x("span",[y._v(y._s(y.formatCurrency(null==t?void 0:t.tong_tien)))])])])})),y._v(" "),x("tr",[x("td",[x("div",[y._v("Làm thêm giờ")])]),y._v(" "),x("td",[x("span",[y._v("-")])]),y._v(" "),x("td",[x("span",[y._v(y._s(y.formatCurrency(null===(l=y.data)||void 0===l?void 0:l.themGio)))])])]),y._v(" "),x("tr",[x("td",{attrs:{colspan:"2"}},[x("b",[y._v("2. Tổng lương theo ngày công thực tế")])]),y._v(" "),x("td",[x("b",[y._v(y._s(y.formatCurrency(null===(c=y.data)||void 0===c?void 0:c.tongThucTe)))])])]),y._v(" "),x("tr",[x("td",{attrs:{colspan:"2"}},[x("b",[y._v("3. Thu nhập bổ sung")])]),y._v(" "),x("td",[x("b",[y._v(y._s(y.formatCurrency(null===(v=y.data)||void 0===v?void 0:v.tongPhuPhi)))])])]),y._v(" "),y._l(null===(_=y.data)||void 0===_?void 0:_.phuPhiKhac,(function(t,n){return x("tr",{key:n},[x("td",{attrs:{colspan:"2"}},[x("span",[y._v(y._s(null==t?void 0:t.name))])]),y._v(" "),x("td",[x("span",[y._v(y._s(y.formatCurrency(null==t?void 0:t.so_tien)))])])])})),y._v(" "),x("tr",[x("td",{attrs:{colspan:"2"}},[x("b",[y._v("4. Các khoản giảm trừ")])]),y._v(" "),x("td",[x("b",[y._v(y._s(y.formatCurrency(null===(h=y.data)||void 0===h?void 0:h.tongGiamTru)))])])]),y._v(" "),y._l(null===(m=y.data)||void 0===m?void 0:m.giamTru,(function(t,n){return x("tr",{key:n},[x("td",{attrs:{colspan:"2"}},[x("span",[y._v(y._s(null==t?void 0:t.name))])]),y._v(" "),x("td",[x("span",[y._v(y._s(y.formatCurrency(null==t?void 0:t.so_tien)))])])])})),y._v(" "),x("tr",[x("td",{attrs:{colspan:"2"}},[x("b",[y._v("Thành tiền")])]),y._v(" "),x("td",[x("b",[y._v(y._s(y.formatCurrency(null===(f=y.data)||void 0===f?void 0:f.thanhTien)))])])])],2)]),y._v(" "),x("button",{directives:[{name:"b-modal",rawName:"v-b-modal.my-modal",modifiers:{"my-modal":!0}}],staticClass:"btn btn-primary mb-3"},[y._v("Thanh toán lương toàn bộ")]),y._v(" "),x("button",{directives:[{name:"b-modal",rawName:"v-b-modal.my-modal-2",modifiers:{"my-modal-2":!0}}],staticClass:"btn btn-success mb-3"},[y._v("Thanh toán lương 1 phần")])])]),y._v(" "),x("b-modal",{ref:"my-modal",attrs:{id:"my-modal","hide-footer":"",centered:"",title:"Thanh toán lương 1 lần"},scopedSlots:y._u([{key:"default",fn:function(t){var n=t.hide;return[x("form",{attrs:{id:"form"}},[x("div",{staticClass:"my-4 pb-3"},[x("div",[x("b-form-group",[x("label",[y._v("Tổng tiền:")]),y._v(" "),x("b-form-input",{attrs:{type:"number",name:"tong_tien",placeholder:"Nhập số tiền"},model:{value:y.tong_tien,callback:function(t){y.tong_tien=t},expression:"tong_tien"}})],1)],1),y._v(" "),x("div",[x("b-form-group",[x("label",[y._v("Ghi chú:")]),y._v(" "),x("b-form-input",{attrs:{name:"ghi_chu",placeholder:"Nhập ghi chú"},model:{value:y.ghi_chu,callback:function(t){y.ghi_chu=t},expression:"ghi_chu"}})],1)],1)]),y._v(" "),x("div",{staticClass:"mt-4 pb-3 d-flex justify-content-between align-items-center w-100"},[x("button",{staticClass:"btn-cancel me-1",attrs:{type:"button"},on:{click:function(t){return n()}}},[y._v("Hủy")]),y._v(" "),x("button",{staticClass:"btn-delete ms-1",attrs:{type:"button"},on:{click:y.send_data}},[y._v("Xác nhận")])])])]}}])}),y._v(" "),x("b-modal",{ref:"my-modal-2",attrs:{id:"my-modal-2","hide-footer":"",centered:"",title:"Thanh toán lương 1 phần"},scopedSlots:y._u([{key:"default",fn:function(t){var n=t.hide;return[x("form",{attrs:{id:"form"}},[x("div",{staticClass:"my-4 pb-3"},[x("div",[x("b-form-group",[x("label",[y._v("Tổng tiền:")]),y._v(" "),x("b-form-input",{attrs:{type:"number",name:"tong_tien",placeholder:"Nhập số tiền"},model:{value:y.tong_tien_2,callback:function(t){y.tong_tien_2=t},expression:"tong_tien_2"}})],1)],1),y._v(" "),x("div",[x("b-form-group",[x("label",[y._v("Ghi chú:")]),y._v(" "),x("b-form-input",{attrs:{name:"ghi_chu",placeholder:"Nhập ghi chú"},model:{value:y.ghi_chu,callback:function(t){y.ghi_chu=t},expression:"ghi_chu"}})],1)],1)]),y._v(" "),x("div",{staticClass:"mt-4 pb-3 d-flex justify-content-between align-items-center w-100"},[x("button",{staticClass:"btn-cancel me-1",attrs:{type:"button"},on:{click:function(t){return n()}}},[y._v("Hủy")]),y._v(" "),x("button",{staticClass:"btn-delete ms-1",attrs:{type:"button"},on:{click:y.send_data_2}},[y._v("Xác nhận")])])])]}}])})],1)],1)],1)}),[],!1,null,"e9ed2598",null);n.default=component.exports},913:function(t,n,e){var content=e(1087);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(22).default)("ca77596c",content,!0,{sourceMap:!1})}}]);